# Update 3: Instagram Tracking System

## Overview

This update introduces Instagram tracking functionality that allows users to monitor Instagram profiles (both their own and competitors') for sentiment analysis and engagement insights. The system provides automated monitoring with detailed analytics through new API endpoints.

## Key Features for Client Applications

### 1. Instagram Profile Monitoring
- **Track Multiple Profiles**: Monitor both your own Instagram profiles and competitor profiles
- **Automated Processing**: System automatically processes the 3 most recent posts/reels every 2 days
- **Comment Analysis**: Analyzes the top 10 comments per post for sentiment
- **Sentiment Classification**: Comments are classified as positive, negative, or neutral

### 2. Data Structure You'll Receive

When you request tracking task data, you'll receive responses in this format:

**Task Overview:**
```json
{
  "_id": "uuid-task-id",
  "target_profile": "instagram_username",
  "is_competitor": true,
  "created_at": "2025-08-01T12:00:00Z",
  "last_scraped": "2025-08-01T12:00:00Z",
  "next_scrape_due": "2025-08-03T12:00:00Z",
  "status": "active"
}
```

**Detailed Post Data:**
```json
{
  "scraped_posts": [
    {
      "post_id": "abc123",
      "post_url": "https://instagram.com/p/abc123",
      "timestamp": "2025-07-30T08:00:00Z",
      "type": "reel",
      "caption": "Post caption text",
      "likes_count": 1234,
      "comments_count": 56,
      "video_view_count": 10000,
      "hashtags": ["#food", "#tasty"],
      "mentions": ["@username"],
      "top_comments": [
        {
          "text": "Amazing product!",
          "sentiment": "positive",
          "owner_username": "commenter123",
          "timestamp": "2025-07-30T09:00:00Z",
          "likes_count": 5
        }
      ]
    }
  ]
}
```

### 3. Automated Processing
- **Background Processing**: Server handles all scraping automatically
- **Scheduled Updates**: Data refreshes every 2 days without client intervention
- **Real-time Access**: Query updated data anytime via API
- **Error Recovery**: System automatically retries failed operations

### 4. Sentiment Analysis Results
- **Three Categories**: Positive, negative, and neutral sentiment classification
- **Percentage Breakdown**: Get exact percentages for each sentiment type
- **Overall Assessment**: Receive overall sentiment determination for each profile
- **Comment-Level Data**: Access individual comment sentiments for detailed analysis

## New API Endpoints for Client Integration

The system provides 7 new REST API endpoints under `/codvid-ai/ig-tracking/`:

1. **POST** `/create_task` - Create new tracking task
2. **GET** `/get_tasks` - Get all your tracking tasks
3. **GET** `/get_task/<task_id>` - Get detailed task information with posts and comments
4. **DELETE** `/delete_task/<task_id>` - Delete a tracking task
5. **PUT** `/update_task/<task_id>` - Update task settings
6. **POST** `/force_scrape/<task_id>` - Trigger immediate data refresh
7. **GET** `/sentiment_summary/<task_id>` - Get aggregated sentiment analysis

All endpoints require JWT authentication and use schema version "4.0".

## Authentication Requirements

- **JWT Token Required**: Include your session token in the Authorization header
- **User Data Isolation**: You can only access your own tracking tasks
- **Session Management**: Use the same authentication system as other endpoints

## Client Integration Overview

### What You Need to Update

1. **Network Module**: Ensure support for all HTTP methods (GET, POST, PUT, DELETE)
2. **Authentication**: Use existing JWT token for all requests
3. **Request Format**: Follow schema version "4.0" format for POST/PUT requests
4. **Error Handling**: Handle new response formats and error messages

### Demo Implementation Available

A complete interactive demo notebook is provided:
- **File**: `Demo-UI-Instagram_Tracking.ipynb`
- **Features**: Complete examples of all Instagram tracking functionality
- **Usage Examples**: Step-by-step implementation guides
- **Error Handling**: Proper error handling patterns
- **Best Practices**: Recommended usage patterns and optimization tips

## Data Processing Flow (Client Perspective)

From your client application's perspective:

1. **Create Tasks** → Send Instagram usernames you want to monitor
2. **Automatic Processing** → Server handles all data collection in background
3. **Query Results** → Request updated data anytime via API calls
4. **Analyze Data** → Receive structured sentiment analysis and engagement metrics
5. **Compare Profiles** → Use data to compare performance across profiles

## Key Benefits for Client Applications

### Automated Data Collection
- **No Manual Work**: Server automatically collects data every 2 days
- **Real-time Access**: Query fresh data anytime without waiting
- **Error Handling**: Server manages all data collection errors automatically
- **Scalable**: Monitor multiple profiles without performance impact

### Rich Analytics Data
- **Sentiment Insights**: Get detailed sentiment breakdown for each profile
- **Engagement Metrics**: Access likes, comments, views, and interaction data
- **Competitive Analysis**: Compare your profiles against competitors
- **Historical Tracking**: Access data from previous scraping sessions

### Easy Integration
- **RESTful APIs**: Standard HTTP methods and JSON responses
- **Consistent Format**: Same authentication and response patterns as existing endpoints
- **Comprehensive Examples**: Complete demo implementation provided
- **Error Handling**: Clear error messages and status codes

## Migration Guide

### For Existing Client Applications
1. **Update Network Module**: Ensure your HTTP client supports GET, POST, PUT, DELETE methods
2. **Authentication**: Use your existing JWT token system - no changes needed
3. **Add New Endpoints**: Integrate the 7 Instagram tracking endpoints
4. **Follow Examples**: Use the demo notebook as implementation reference

### For New Client Applications
1. **Authentication Setup**: Implement standard JWT authentication flow
2. **HTTP Client**: Use any HTTP client that supports REST APIs
3. **Demo Reference**: Follow the comprehensive demo notebook examples
4. **Error Handling**: Implement proper error handling as shown in examples

## Quick Start

1. **Create Task**: POST to `/create_task` with Instagram username
2. **Get Results**: GET from `/sentiment_summary/{task_id}` 
3. **View Details**: GET from `/get_task/{task_id}` for full data

All requests need `Authorization: Bearer {jwt_token}` header.

## What's Next

### Immediate Actions
1. **Review API Documentation**: Read the detailed endpoint documentation
2. **Try the Demo**: Run through the interactive demo notebook
3. **Implement Basic Features**: Start with creating tasks and viewing results
4. **Add Advanced Features**: Implement comparison and analysis features

### Support Resources
- **Detailed API Reference**: Complete endpoint documentation with examples
- **Integration Guide**: Step-by-step client implementation instructions
- **Interactive Demo**: Full-featured demo notebook with all examples
- **Troubleshooting**: Common issues and solutions guide

This Instagram tracking system provides powerful social media monitoring and sentiment analysis capabilities through simple REST API calls, making it easy to integrate into any client application.